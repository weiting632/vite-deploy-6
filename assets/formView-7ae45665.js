import{_ as g,m as x,b as V,r as p,o as u,c as _,e as s,i as w,n as r,d as n,w as y,t as d,F as C,h as k,g as E,v as S}from"./index-060bb3e5.js";import{S as T}from"./sweetalert2.all-bd93a4f7.js";import{c as b}from"./cart-b05996ed.js";const{VITE_URL:U,VITE_PATH:I}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"tomyalan978",BASE_URL:"/vite-deploy-6",MODE:"production",DEV:!1,PROD:!0,SSR:!1},L={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{},computed:{...x(b,["carts","final_total"])},methods:{...V(b,["getCart","addToCart","deleteItem","updateCartItem","deleteCartsItem"]),createOrder(){const l=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel}),e=`${U}/v2/api/${I}/order`,h=this.form;this.$http.post(e,{data:h}).then(i=>{const t=i.data.orderId;console.log("id:",t),l.hide(),T.fire({position:"top",title:"訂單已送出",showConfirmButton:!1,timer:1500,customClass:{popup:"small-swal2-popup",title:"small-swal2-title"}}),this.$refs.form.resetForm(),this.$router.push({path:`form/${t}`}),this.getCart()}).catch(i=>{alert(i.response.data.message)})},routerLook(){this.$router.push({path:"/products"})}},mounted(){}},q={class:"container"},B={class:"row"},D={key:0,class:"col-md-12 text-center align-items-center my-8"},R=s("h2",null,"購物車沒有產品",-1),j=s("h2",{class:"fs-4 my-5"},"填寫訂購資訊",-1),A={class:"mb-3"},N=s("label",{for:"email",class:"form-label"},"Email",-1),O={class:"mb-3"},P=s("label",{for:"name",class:"form-label"},"收件人姓名",-1),$={class:"mb-3"},F=s("label",{for:"tel",class:"form-label"},"收件人電話",-1),H={class:"mb-3"},M=s("label",{for:"address",class:"form-label"},"收件人地址",-1),z={class:"mb-3"},G=s("label",{for:"message",class:"form-label"},"留言",-1),J=s("div",{class:"text-center mb-4"},[s("button",{type:"submit",class:"btn btn-danger btn-lg"},"送出訂單")],-1),K={class:"col-md-4 mb-5 mt-md-17 mt-sm-5 d-none d-md-block"},Q=s("div",{class:"card-header text-center text-white bg-success mb-2"}," 訂單摘要 ",-1),W={class:"d-flex justify-content-between mb-2"},X=s("span",{class:"px-2"},"小計",-1),Y={class:"px-2"},Z=s("div",{class:"d-flex justify-content-between mb-2"},[s("span",{class:"px-2"},"運費"),s("span",{class:"px-2"},"$0")],-1),ss={class:"d-flex justify-content-between mb-3"},es=s("span",{class:"px-2"},"總計",-1),ts={class:"px-2"},os=s("div",{class:"card-header text-center text-white bg-success"}," 購物清單 ",-1),ls={class:"card-body bg-light"},as={class:"d-flex"},ns={class:"pb-2"},rs={class:"cart-img w-100"},ds=["src"],is={class:"pb-2"},cs={class:"px-4 text-nowrap"},ms=s("br",null,null,-1),us={class:"px-4"},_s=s("br",null,null,-1),ps={class:"px-4"};function hs(l,e,h,i,t,f){const c=p("v-field"),m=p("error-message"),v=p("v-form");return u(),_("div",q,[s("div",B,[l.carts.length===0?(u(),_("div",D,[R,s("a",{href:"#",class:"btn btn-to-shop btn-outline bg-success text-white px-7 mt-4 mb-8",onClick:e[0]||(e[0]=o=>f.routerLook()),"data-bs-dismiss":"offcanvas"},"來去看看")])):w("",!0),s("div",{class:r(["col-md-8",{"d-none":l.carts.length===0}])},[j,n(v,{ref:"form",onSubmit:f.createOrder},{default:y(({errors:o})=>[s("div",A,[N,n(c,{id:"email",name:"email",type:"email",class:r(["form-control",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=a=>t.form.user.email=a)},null,8,["class","modelValue"]),n(m,{name:"email",class:"invalid-feedback"})]),s("div",O,[P,n(c,{id:"name",name:"姓名",type:"text",class:r(["form-control",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),n(m,{name:"姓名",class:"invalid-feedback"})]),s("div",$,[F,n(c,{id:"tel",name:"電話",type:"text",class:r(["form-control",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:t.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=a=>t.form.user.tel=a)},null,8,["class","modelValue"]),n(m,{name:"電話",class:"invalid-feedback"})]),s("div",H,[M,n(c,{id:"address",name:"地址",type:"text",class:r(["form-control",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),n(m,{name:"地址",class:"invalid-feedback"})]),s("div",z,[G,E(s("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=a=>t.form.message=a)},null,512),[[S,t.form.message]])]),J]),_:1},8,["onSubmit"])],2),s("div",K,[s("div",{class:r(["card bg-light",{"d-none":l.carts.length===0}])},[Q,s("div",W,[X,s("span",Y,d(l.final_total),1)]),Z,s("div",ss,[es,s("span",ts,d(l.final_total),1)])],2),s("div",{class:r(["card mt-6",{"d-none":l.carts.length===0}])},[os,s("div",ls,[s("table",null,[s("tbody",null,[(u(!0),_(C,null,k(l.carts,o=>(u(),_("tr",{class:"border-bottom",key:o.id},[s("div",as,[s("td",ns,[s("div",rs,[s("img",{src:o.product.imageUrl,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,ds)])]),s("td",is,[s("span",cs,d(o.product.title),1),ms,s("small",us,d(o.qty)+" 個",1),_s,s("span",ps,"NT$"+d(o.total),1)])])]))),128))])])])],2)])])])}const gs=g(L,[["render",hs]]);export{gs as default};
