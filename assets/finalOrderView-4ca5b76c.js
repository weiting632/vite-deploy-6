import{S as u}from"./sweetalert2.all-bd93a4f7.js";import{_,o as r,c as i,e as t,F as p,h as g,t as l}from"./index-060bb3e5.js";const{VITE_URL:d,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"tomyalan978",BASE_URL:"/vite-deploy-6",MODE:"production",DEV:!1,PROD:!0,SSR:!1},m={data(){return{order:{},products:[],final_total:0,qty:0,user:{},is_paid:!1,is_change:!0}},methods:{getOrder(){const a=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel}),{id:s}=this.$route.params;console.log("id:",s),this.$http(`${d}/v2/api/${h}/order/${s}`).then(e=>{console.log(e),a.hide(),this.order=e.data.order,this.is_paid=e.data.order.is_paid,this.products=e.data.order.products,this.user=e.data.order.user,console.log("products:",this.products)})},changeStatus(){this.payTheBill(),this.is_change=!this.is_change,this.getOrder()},payTheBill(){const a=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel}),{id:s}=this.$route.params;this.$http.post(`${d}/v2/api/${h}/pay/${s}`).then(e=>{console.log(e),a.hide(),u.fire({position:"top",title:"已成功結帳",showConfirmButton:!1,timer:1500,customClass:{popup:"small-swal2-popup",title:"small-swal2-title"}})})},backToProduct(){const a=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel});this.$router.push({path:"/products"}),a.hide()}},mounted(){this.getOrder()}},f={class:"container"},b={class:"row justify-content-center"},y={class:"col-md-6"},C={action:""},w=t("h2",{class:"text-center font-weight-bolder mb-5"},null,-1),x={class:"table table-borderless mb-5"},k=t("thead",{class:"bg-main-light"},[t("tr",null,[t("th",{class:""}," 品名 "),t("th",{class:"text-start"}," 數量 "),t("th",{class:"text-right"}," 總價 ")])],-1),$={class:"font-weight-bolder"},T={class:"text-start"},E={class:"text-right"},S=t("td",{colspan:"2",class:"text-right"}," 總計 ",-1),v={class:"text-right"},P={class:"table mb-5"},B=t("th",{width:"130"}," Email ",-1),V=t("th",null,"姓名",-1),O=t("th",null,"收件人電話",-1),R=t("th",null,"收件人地址",-1),D=t("th",null,"付款狀態",-1),I={key:0,class:"text-danger"},L={key:1,class:"text-primary"};function A(a,s,e,U,o,c){return r(),i("div",f,[t("div",b,[t("div",y,[t("form",C,[w,t("table",x,[k,(r(!0),i(p,null,g(o.products,n=>(r(),i("tbody",{key:n.id},[t("tr",null,[t("td",$,l(n.product.title),1),t("td",T,l(n.qty),1),t("td",E,l(n.product.price),1)])]))),128)),t("tfoot",null,[t("tr",null,[S,t("td",v,l(o.order.total),1)])])]),t("table",P,[t("tbody",null,[t("tr",null,[B,t("td",null,l(o.user.email),1)]),t("tr",null,[V,t("td",null,l(o.user.name),1)]),t("tr",null,[O,t("td",null,l(o.user.tel),1)]),t("tr",null,[R,t("td",null,l(o.user.address),1)]),t("tr",null,[D,o.is_paid===!1?(r(),i("td",I," 未付款 ")):(r(),i("td",L," 已付款 "))])])]),o.is_change?(r(),i("button",{key:0,class:"btn btn-primary mb-5 w-100",onClick:s[0]||(s[0]=(...n)=>c.changeStatus&&c.changeStatus(...n))},"確認結帳")):(r(),i("button",{key:1,class:"btn btn-primary mb-5 w-100",onClick:s[1]||(s[1]=n=>c.backToProduct())},"繼續購物"))])])])])}const H=_(m,[["render",A]]);export{H as default};
